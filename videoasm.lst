   1              	
   2              		.equ	ROWS, 		25		# number of rows
   3              		.equ	COLS, 		80		# number of columns
   4              	
   5              		.equ	CHARBYTES,	2		# total #bytes per char
   6              		.equ	ROWBYTES,	COLS*CHARBYTES	# total #bytes per row
   7              		.equ	SCREENBYTES,	ROWS*ROWBYTES	# total #bytes per screen
   8              	
   9              		.equ	SPACE,		32		# blank space
  10              		.equ	NEWLINE,	'\n'		# newline character
  11              	
  12              		.equ	DEFAULT_ATTR, 	0x2e		# PSU Green
  13              	
  14              		.data
  15              	
  16              	        # Reserve space for a video ram frame buffer with
  17              	        # 25 rows; 80 columns; and one code and one attribute
  18              	        # byte per character.
  19              		.globl  video
  20              		.align	4
  21 0000 00000000 	video:	.space	SCREENBYTES
  21      00000000 
  21      00000000 
  21      00000000 
  21      00000000 
  22              	
  23              	        # Some variables to hold the current row, column, and
  24              		# video attribute:
  25              		.align	4
  26 0fa0 00000000 	row:	.long	0		# we will only use the least significant
  27 0fa4 00000000 	col:	.long	0		# bytes of these variables
  28 0fa8 00000000 	attr:	.long	0
  29              	
  30              		.text
  31              	
  32              		# Clear the screen, setting all characters to SPACE
  33              	        # using the DEFAULT_ATTR attribute.
  34              		.globl	cls
  35 0000 55       	cls:	pushl	%ebp
  36 0001 89E5     		movl	%esp, %ebp
  37              		# Fill me in! JV
  38              	
  39              	# movl $COLS, %ecx
  40 0003 B9E80300 	  movl $(SCREENBYTES/4), %ecx
  40      00
  41              	# decl %ecx //last 2 bytes are not written
  42 0008 BA000000 	  movl $video, %edx
  42      00
  43              	  .equ HALF, (DEFAULT_ATTR<<8) | SPACE
  44              	  .equ FULL, (HALF<<16) | HALF
  45              	# movw $(DEFAULT_ATTR<<8 | SPACE), %ax
  46              	  
  47              		
  48              	#writes one byte A onto screen
  49              	# movb $'A', video
  50              	
  51              	1:
  52              	
  53              	# movb $SPACE, (%edx)
  54              	# movb $DEFAULT_ATTR, video+1
  55              	# movb $DEFAULT_ATTR, 1(%edx)
  56              	
  57              	# movw %ax, (%edx)
  58 000d C702202E 	  movl $FULL, (%edx)
  58      202E
  59 0013 83C204   	  addl $4, %edx
  60 0016 49       	  decl %ecx
  61 0017 75F4     	  jnz  1b
  62              	
  63              	
  64              	
  65              	
  66 0019 89EC     		movl	%ebp, %esp
  67 001b 5D       		popl	%ebp
  68 001c C3       		ret
  69              	
  70              		# Set the video attribute for characters output using outc.
  71              		.globl	setAttr
  72 001d 55       	setAttr:pushl	%ebp
  73 001e 89E5     		movl	%esp, %ebp
  74              		# Fill me in!
  75 0020 89EC     		movl	%ebp, %esp
  76 0022 5D       		popl	%ebp
  77 0023 C3       		ret
  78              	
  79              		# Output a single character at the current row and col position
  80              		# on screen, advancing the cursor coordinates and scrolling the
  81              		# screen as appropriate.  Special treatment is provided for
  82              	        # NEWLINE characters, moving the "cursor" to the start of the
  83              		# "next line".
  84              		.globl	outc
  85 0024 55       	outc:	pushl	%ebp
  86 0025 89E5     		movl	%esp, %ebp
  87              		# Fill me in! JV
  88              	
  89              	
  90              	
  91 0027 89EC     		movl	%ebp, %esp
  92 0029 5D       		popl	%ebp
  93 002a C3       		ret
  94              	
  95              		# Output an unsigned numeric value as a sequence of 8 hex digits.
  96              		.globl	outhex
  97 002b 55       	outhex:	pushl	%ebp
  98 002c 89E5     		movl	%esp, %ebp
  99              		# Fill me in!
 100 002e 89EC     		movl	%ebp, %esp
 101 0030 5D       		popl	%ebp
 102 0031 C3       		ret
 103              	
DEFINED SYMBOLS
          videoasm.s:2      *ABS*:0000000000000019 ROWS
          videoasm.s:3      *ABS*:0000000000000050 COLS
          videoasm.s:5      *ABS*:0000000000000002 CHARBYTES
          videoasm.s:6      *ABS*:00000000000000a0 ROWBYTES
          videoasm.s:7      *ABS*:0000000000000fa0 SCREENBYTES
          videoasm.s:9      *ABS*:0000000000000020 SPACE
          videoasm.s:10     *ABS*:000000000000000a NEWLINE
          videoasm.s:12     *ABS*:000000000000002e DEFAULT_ATTR
          videoasm.s:21     .data:0000000000000000 video
          videoasm.s:26     .data:0000000000000fa0 row
          videoasm.s:27     .data:0000000000000fa4 col
          videoasm.s:28     .data:0000000000000fa8 attr
          videoasm.s:35     .text:0000000000000000 cls
          videoasm.s:43     *ABS*:0000000000002e20 HALF
          videoasm.s:44     *ABS*:000000002e202e20 FULL
          videoasm.s:72     .text:000000000000001d setAttr
          videoasm.s:85     .text:0000000000000024 outc
          videoasm.s:97     .text:000000000000002b outhex

NO UNDEFINED SYMBOLS
